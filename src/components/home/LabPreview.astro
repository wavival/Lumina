---
import ProjectCard from "../projects/ProjectCard.astro";
import Button from "../ui/Button.astro";

interface Links { site?: string; github?: string; behance?: string }
interface Item  { title: string; slug: string; cover: string; alt?: string; links?: Links }

const {
  title = "Laboratorio",
  subtitle = "Creativo y Producción",
  items = [] as Item[],
  ctaHref = "/lab",
  ctaLabel = "VER MÁS",
} = Astro.props as {
  title?: string;
  subtitle?: string;
  items?: Item[];
  ctaHref?: string;
  ctaLabel?: string;
};
---

<section
  aria-labelledby="lab-title"
  class="section bg-card tx-base"
  itemscope
  itemtype="https://schema.org/CollectionPage"
>
  <div class="container-prose">
    <header class="mb-6">
      <h2 id="lab-title" class="heading-2 text-[var(--ui-text)]">{title}</h2>
      <p class="body-sm text-[var(--brand-blue)] -mt-1">{subtitle}</p>
    </header>

    <ul
      role="list"
      class="grid grid-cols-1 gap-4 place-items-stretch"
    >
      {items.map((it: Item) => (
        <li role="listitem" class="card flex flex-col items-center">
          <ProjectCard
            size="small"
            title={it.title}
            cover={it.cover}
            href={`/lab/${it.slug}`}
            links={it.links}
            alt={it.alt ?? `${it.title} — portada`}
          />
        </li>
      ))}
    </ul>

    <footer class="mt-6 flex justify-center">
      <Button
        href={ctaHref}
        variant="secondary"
        size="sm"
        class="btn-text-sm"
        aria-label="Ver más proyectos del laboratorio"
      >
        {ctaLabel}
      </Button>
    </footer>
  </div>
</section>